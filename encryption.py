
#------------Program to encrypt or decrypt a text file by passing it as a system argument and if not the pgm will just encrypt or decryt what you type-------------
# This is a ceasar encription 

import sys
#  path_text_file= sys.argv[1]; clef = key = sys.argv[2]; encrypt_decrypt = sys.argv[3]  # d =  decrypt, e = encrypt


# This is a ceasar encription but by mixing special characters and shuffling the alphabet it makes it impossible to guess the key off the top of your head 
alphabet="a6A@$b1<Bcè5C|#dDe2fghij:kF/}GoHç_ô3I4J[KL&M];Np,q(rsOP)R '!?.STU~0V{W-XàY9Z*lm+én>8tuv=wxy7Ez"


def encrypt(text, key):
  
    encrypted_text = ''

    for char in text:
        idx = (alphabet.index(char) + key) % len(alphabet)
        encrypted_text = encrypted_text + alphabet[idx]

    return encrypted_text


def decrypt(text, key):
  
    decrypted_text = ''

    for char in text:
        idx = (alphabet.index(char) - key) % len(alphabet)
        decrypted_text = decrypted_text + alphabet[idx]

    return decrypted_text



if (len(sys.argv)>1):
  # pgm_name =sys.argv[0]  
  path_text_file= sys.argv[1]
  clef = int(sys.argv[2])
  encrypt_decrypt = sys.argv[3]  # d =  decrypt, e encrypt

  if encrypt_decrypt.lower() == 'e':

      file=open(path_text_file, 'r')
      textfile= file.readlines()
      file.close()

      #this is a pain but \n are added at the end of each line that goes in textfile (is readlines method was doing this in python 2.x?) 
      #it need to be removed or it get encrypted 
      i=0
      for line in textfile:
          textfile[i]= line.replace("\n",'')
          i+=1

      file=open(path_text_file, 'w')
      #and the damned \n need to be put back manually if you don't want to end up with one long line of coded text...
      for line in textfile:
          mesagecodee=encrypt(line, clef)
          file.write(mesagecodee+'\n')
      
      file.close()

  elif encrypt_decrypt.lower() == 'd':
       
       file=open(path_text_file, 'r')
       textfile= file.readlines()
       file.close()

       i=0
       for line in textfile:
          textfile[i]= line.replace("\n",'')
          i+=1
       
       file=open(path_text_file, 'w')
       for line in textfile:
          mesage_decodee=decrypt(line, clef)
          file.write(mesage_decodee+'\n')
       
       file.close()

  else:
      print("You need to give the path of your text file, the key and either d for decryption, or e for encryption.")



else:
  exit='0'

  while  exit=='0':
      text= str(input(print("type the text to encode: \n")))
      key = int(input(print("donnez un clef (un chiffre entier)\n")))
      
      print("votre texte cryptee est le suivant:\n")
      print(encrypt(text, key))
      
      text2=str(input(print("type the text to decode: \n")))
      key2 = int(input(print("donnez la clef \n")))
      
      print("votre texte decryptee est le suivant:\n")
      print(decrypt(text2, key2))

      exit=input(print("\n Continue: type 0 \n Exit: type any other key"))




'''

-----------------------------------Yes that's me! Max la menace! -----------------------------------
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:::::::::::::::::::::::::::::::::::::::::::::::::::++;::::::::::::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::;:;+**%%%%%*?%%%?%?%%;:;:;::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::;;?%*%S%SSS%%S%S%SSS%%%%%%???%%;;:::::::::::::::::::::::::::::::
:::::::::::::::::::::::::::::::::;:?%SS#SSSSSS%%SS%%%%%%%%%%???%?%%?%S%%;:::::::::::::::::::::::::::
:::::::::::::::::::::::::::;;;;+S#S#S#S#SSS##S###SSS%#S%%%%%???%%%??%%%%%%?:++;:::::::::::::::::::::
::::::::::::::::::::::::;:;;;?SS#S##S##SSSS###SSSSSS#%%%%%%%%??%%??%%%%%%%?*?*;:::::::::::::::::::::
:::::::::::::::::::::::;;;;+SSS#S####SS#%S#######SS%SSS%S%SS#@#SS%%%%%%%%%%%?+;;;:::::::::::::::::::
::::::::::::::::::::::;;;+S#SS#S##SSSS@###SS####SSSSS##SSS%S##S%%%%%SSS%%%%%%%?++:::::::::::::::::::
:::::::::::::::::::;;:;:S%#####S###@#S####@@###S####@#S#SS%%SSSS%%%%SS###SS%%%%%?:::::::::::::::::::
:::::::::::::::::;;;;;#S##########S@############S######S##S%%%S%#@#S##@####SSS%%%??:::::::::::::::::
::::::::::::::;;;;;;+SSS#######################%#######S#SSS%%%%%SS####S####SS%%%%??::::::::::::::::
:::::::::::::::;;;:?S##################SSSS##SSSSSS##@@####S@#SSSS%SSS#SS######S%%%%%;::::::::::::::
:::::::::::::;;;;;*#S####@@####SS#SS%%%%%S%S####SS#SS###@#@#S##@@@@###S####SS#SS#SSS%?%;::::::::::::
::::::::::::::;;;;SS#####@@#SS#SS%SS%%??%%%%SSS#SS#SS#SSSS#SS#######@@@########SSS%SSS%%+;::::::::::
:::::::::::;;;;;;*SS##S###SS%%%?%%????*?????%%%%%%%#S%%S%SS#S#SS##########@##@SSSSS%%%%%%:;:::::::::
:::::::::::::;;;+%SS##SS##S%??????*********?????%%%SS%%%%SSSSS#S#########@###@###SS#S%%%%%;:::::::::
::::::;;;:;;:;;;*SSS##S##%%?*******+*++++++****????%%%%%?%%%%SSS#S#############SS#SSS#SS%%?;;:::::::
::::;::;;;;;;;;;?%SS####S%?***+++++++++++;++++***?????%%%%%%%%%%%SSS###########@######S#S%?+;:::::::
:::::;;;;;;;;;;;%%%SS###%?*++++++++;;;;;;;;;++++***?????????%%%%%%SSSSSSS######S#######S#S%+;:::::::
:::::;;;;;;;;;;;%%SSS##S%*++++++;;;;;;;;;;;;;;;;+++****???????????%%%SSSSSSS#SS####@#####S%*;:::::::
:::;;;;;;;;;;;;;%SS###SS?+++++++++;;;;;;;;;;;;;;;;++++*+********????????%%%#SS####@#@@@##SS?;;::::::
:;;;;;;;;;;;;;;;%S###SS%++++++++++;;;;;;;;;:;:::;;;;;;;;;+++++*****??????????%%SS##@@#@@@SS;;;;;::::
:::;;;;;;;;;;;;+%####@?*+++********++;;;;;;;;;:;;;;;;;;;;;;++++*****???????????%####@@@##SS+;;;;;:::
:::;;;;;;;;;;;;;?S####*++*******??%%%%??*+;;;;;;;;;;;;+;;++**??%%%?????*??****??%#@@@#@##S++;;;;;;;;
:;;;;;;;;;;;;;;;+%SS#S++***+*++++++**??%???**++;;;;+++**???%%%????***?*????****??##@@####S*;;;;;;;;;
::;;;;;;;;;;;;;;;*#SS*+++*************?*?*****+;;;;++*****????*************?****?#######SS+;;;;;;;;;
;;;;;;;;;;;;;;;;;;?SS++++**?%??SSSS*%#??%???**++;;;;+**????S??%S##S%?S%???*******%#######%;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;%S+++++**%??**#S@@S**?**??**;;;;++*????*?**S@@##??#%??********?S#####S*;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;S%+++++++******%#S?****?+**+;;;;++***+???*+#SSS?*?%??***+*****?S##S%S+;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;S%++++++++++**+*+*++++++**++;;;;++****++**************++++****?SS%%?+;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;%S+++++++*+++++++++++++++++++;;;++***+++++++++++++++++++++****?SS*?*+;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;+*%*++++++++++++++++++++++++++;;;++**+++++++++++++++++++++****?%S%**;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;**+**++++++++++++;;;++++++++;;;++**++++++;+++++++++++++*****?%???+++;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;+*****++++++;;;;;;;;+++***++;;;++****++++;;+++++++++*******???*?++++;;;;;+;+;;;;
;;;;;;;;;;;;;;;;;;;+++******++++;;;;;;;;++**+++;;;;++*****++++;;;+++++**********?***++;++++++;;;;;;;
;;;;;;;;;;;;;++;;++;++******+++++;;;;;;;++*++++;;;;++*****++++;;;+++++*********?***+++++++++++++;;;;
;;;;;;;;;;;;;;+;;++++++******+++++;;;;+++********+*??******+++;++++++*********?***+++++++++++++++;;;
;;;;;;;;;;;;;;;+++++++++******++++;;;++++**??????????%%?***++++++++++*********?+++++++++++++++++++++
;;;;;;;;;;;++;;+++++++++*****+++++++++++++**????????????***++++++++++*******??+++++++++++;++++++++++
;;;;;;;;;;;;;++++++++++++*****+++++++++++*+***************++++++++++******?*??+++++++++++++++++++++;
;;;;;;;;;;;;;++++++++++++*****+++++++++++*+++++++*++++**++*+*+++++++********?++++++++++++++++++++++;
;;;;;;;;;;++++++++++++++++******++++++*****?????*++??**++++***+++++*******??+++++++++++++++++++++++;
;;;;;;+;+;;;;++++++++++++++?****+++++**?####S#S%%%%%?%%%%%?%S?**++******???*+++++++++++++++++++++++;
;;;;;;;;;;++++++++++++++++S*?*****+++***???????????????????*+****+****?????*++++++++++++++++++++++;;
;;;;++;++;++++++++++++++;##**?*****+++++**??????***??*???************??????##*++++++++++++++++++++;;
;;;;;+++++++++++++++++++#@@*???*************??????????******+******????????@##S++++++++++++++++++++;
;;;;;+++++++++++++++++##@@#?*????**************?????**************?????????##@#%+++++++++++++++++;;;
;;;;+++++++++++++++++##@@#@%??????****+++*+*+++++**+++++*********??????????#@@##%+;++++++++;;;;;;;;;
;;;+;++++++++++++++%S#@@@@@%??*??????***+++++++++++++++++******??%????????%S@@@##?;++;;;;;++++;;;;;;
;;;+++++++++++++++SS###@@@@S???????????**++++++++++++++******??%%?????????%S@@@###++++++;++;;;;;;;;;
;;;++++++++++++++*S###@@@@@S??????????%??*****++***********??%%???????????%S@@@@###?;+++;++;;;;;;;;;
++++++++++++++++%S####@@@@@#??????*??????%????**??????????S%?????????*????%S@@@@#####S#@:;;;+;++;;;;
++++++++++++++++SS#####@@@@#%???***????????????%???%%%%??????????????????%%S##@@#####@####@+++;;;;;;
+++++++++++++@#S#####@@@@@@S%???*?**?????????????????????????????????????%%S##@#######@#####@@;++++;
++++++++;+#S##%######@@@@@#S%??**?**????????????????????????????????????%%%S##@@@@#####@########S+:;
+;*@@#@####@#SS######@@@@@@S%????*******??????????*?????????????????????%%%S##@@#######@@########S#S
SS##########S#######@##@@@@S%?????*********?????******??????????????????%%%SS#@#@#######@@##########
SSS#####@#SS####@##@##@@@@@#%????************************????*****??????%%%SS@@#@######SS@@@@#######
%SS##@@@#SS####@##@@##@#@@@#%%???**********************************?????%%%S##@@@#########@@@@####@#
S####@@#S@@####@@#######@@@@S%????**********************************?????%%%##@#@###########@@#@####
S###@@###@@@###@@#######@@@@S%%????************************************??%%#@##@@@###########@######
SS#####@##################@@S%???????*******++*+++****++++++++********???%##########################

'''